# Smart Home Telemetry Analysis Platform

–ü—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—É –¥–ª—è —Å–±–æ—Ä–∞, –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏ –∞–Ω–∞–ª–∏–∑–∞ —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏ —É–º–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –≤ —ç–∫–æ—Å–∏—Å—Ç–µ–º–µ "–£–º–Ω–æ–≥–æ –¥–æ–º–∞".

## üìå –û–±—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Å–∏—Å—Ç–µ–º—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É–º–Ω—ã–º–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏ (–¥–∞—Ç—á–∏–∫–∏ –¥–≤–∏–∂–µ–Ω–∏—è, –æ—Å–≤–µ—â–µ–Ω–∏—è, —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã). –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞:
- –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ—Ç –¥–æ–º–∞—à–Ω–∏—Ö —Ö–∞–±–æ–≤
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏ –∞–≥—Ä–µ–≥–∏—Ä—É–µ—Ç —Ç–µ–ª–µ–º–µ—Ç—Ä–∏—é
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç —Å—Ü–µ–Ω–∞—Ä–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–æ–∫–∞–∑–∞–Ω–∏–π –¥–∞—Ç—á–∏–∫–æ–≤

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

```mermaid
graph LR
    A[Smart Hub] -->|Zigbee| B[Hub Router]
    B -->|gRPC| C[Collector]
    C -->|Kafka| D[Aggregator]
    D -->|Kafka| E[Analyzer]
    E -->|gRPC| B
    F[PostgreSQL] --> E
    G[Config Server] --> C
    G --> D
    G --> E
```
	
## üèó –û—Å–Ω–æ–≤–Ω—ã–µ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã

### Hub Router (—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω)
- **–§—É–Ω–∫—Ü–∏–∏**:
  - –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ—Ç –¥–æ–º–∞—à–Ω–∏—Ö —Ö–∞–±–æ–≤
  - –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –≤ —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç

### Collector
- **–§—É–Ω–∫—Ü–∏–∏**:
  - –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ—Ç Hub Router
  - –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –≤ Avro
  - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ Kafka

### Aggregator
- **–§—É–Ω–∫—Ü–∏–∏**:
  - –ê–≥—Ä–µ–≥–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ —Ö–∞–±–∞–º
  - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å–Ω–∏–º–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–π –≤ Kafka

### Analyzer
- **–§—É–Ω–∫—Ü–∏–∏**:
  - –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ
  - –ó–∞–ø—É—Å–∫–∞–µ—Ç —Å—Ü–µ–Ω–∞—Ä–∏–∏ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ —É—Å–ª–æ–≤–∏–π

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç             | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è         |
|-----------------------|--------------------|
| –Ø–∑—ã–∫–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è| Java (Spring Boot) |
| –ë—Ä–æ–∫–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏–π      | Apache Kafka       |
| –°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è         | Apache Avro        |
| RPC                  | gRPC               |
| –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö          | PostgreSQL         |
| Service Discovery    | Eureka             |
| –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è         | Spring Cloud Config|

## üìã –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è      | –£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞                     |
|----------------|-------------------------------|
| **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** | –•–∞–±                           |
| **–û—Å–≤–µ—â–µ–Ω–∏–µ**  | –£–º–Ω—ã–µ –ª–∞–º–ø—ã (–≤–∫–ª/–≤—ã–∫–ª)        |
| **–≠–ª–µ–∫—Ç—Ä–æ–ø–∏—Ç–∞–Ω–∏–µ** | –£–º–Ω—ã–µ —Ä–æ–∑–µ—Ç–∫–∏, –≤—ã–∫–ª—é—á–∞—Ç–µ–ª–∏ |
| **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** | –î–∞—Ç—á–∏–∫–∏ –¥–≤–∏–∂–µ–Ω–∏—è           |
| **–ö–æ–º—Ñ–æ—Ä—Ç**    | –î–∞—Ç—á–∏–∫–∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã, –æ—Å–≤–µ—â–µ–Ω–∏—è|

## üìä –ü—Ä–∏–º–µ—Ä –ø–æ—Ç–æ–∫–∞ –¥–∞–Ω–Ω—ã—Ö

```mermaid
sequenceDiagram
    participant –•–∞–±
    participant HubRouter
    participant Collector
    participant Kafka
    participant Aggregator
    participant Analyzer
    
    –•–∞–±->>HubRouter: –î–∞–Ω–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ (Zigbee)
    HubRouter->>Collector: gRPC-–∑–∞–ø—Ä–æ—Å
    Collector->>Kafka: Avro-—Å–æ–æ–±—â–µ–Ω–∏–µ
    Kafka->>Aggregator: –°—ã—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ
    Aggregator->>Kafka: –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
    Kafka->>Analyzer: –°–Ω–∏–º–æ–∫ —Å–æ—Å—Ç–æ—è–Ω–∏—è
    Analyzer->>HubRouter: –ö–æ–º–∞–Ω–¥—ã —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ (gRPC)
	```